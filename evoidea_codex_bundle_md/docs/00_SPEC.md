# 00_SPEC — требования и границы

## 1. Что строим
CLI-инструмент на Rust + Codex skill. Инструмент реализует “меметический” цикл:
генерация → оценка → отбор → скрещивание → мутация → улучшение → повтор.

## 2. Вход
- `prompt` (строка): задача пользователя (идея проекта, решение проблемы, стратегия и т.п.)
- Опциональные ограничения:
  - ниша/рынок
  - срок до MVP
  - требование по доходу (например $10k/мес)
  - ограничения по стеку/ресурсам
  - язык ответа (по умолчанию ru)

## 3. Выход (MODE=IDEATION)
Одна лучшая идея:
- `title`
- `summary` (1–3 абзаца)
- `facets`:
  - `audience`
  - `jtbd`
  - `differentiator`
  - `monetization`
  - `distribution`
  - `risks`
- `scores` по критериям + `overall_score`
- `why_won`: 2–6 причин

Важно: IDEATION **не** должен выдавать подробный план реализации, если пользователь не просил.

## 4. Выход (MODE=PLANNING)
Отдельная команда/режим (можно позже):
- план реализации выбранной идеи (этапы, задачи, метрики, GTM)

## 5. Артефакты запуска
Каждый запуск создаёт `runs/<run_id>/`:
- `config.json` — применённые параметры
- `state.json` — текущее состояние популяции
- `history.ndjson` — события по итерациям (оценки/отбор/мутации)
- `final.json` — финальный результат
- `final.md` — (опционально) красивый markdown-отчёт

## 6. Алгоритм (коротко)
Итерация i:
1) (опц.) research: собрать факты/ссылки по нише
2) generate: добавить идеи
3) critic: оценить (мультикритерий)
4) select: элита + разнообразие
5) crossover: скрестить топ-идеи
6) mutate: вариации
7) refine: улучшить top-K
8) stop: если достигнут критерий

## 7. Критерии остановки
- `best_score >= threshold`
- или нет улучшения `best_score` N итераций (`stagnation_patience`)
- или достигнут `max_rounds`

## 8. Нефункциональные требования
- Локально.
- Тестируемо и воспроизводимо (через mock provider).
- Минимальные зависимости.
- Расширяемость: новые фазы добавляются без переписывания ядра.

## 9. Definition of Done
- `cargo test` green
- mock run создаёт артефакты и корректный `final.json`
- skill присутствует
